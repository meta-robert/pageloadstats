{% extends "base.html" %}
{% block header %} 
	<script language="javascript" type="text/javascript" src="/static/js/jquery.flot.js"></script>
    <script type="text/javascript">
    	target_ids = {{ target_ids }};
		$(document).ready(function(){
			$.ajax({
				url: "/pls/api/chartline?target_ids={{ target_ids }}{{ start_end_params }}{{ trim_params }}",
				type: "GET",
				dataType: "json",
				success: onDataReceived
			});
			//$.plot($("#placeholder"), [ [[0, 0], [1, 1]] ], { yaxis: { max: 1 } });
			fillDateRange();
		});
		
		function onDataReceived(series) {
			var options = {
				lines: {
					show: true
				},
				points: {
					show: false
				}
			}
			$.plot("#placeholder", series, options);
		}


    </script>
{% endblock%}


{% block content %}
  	<div id="resizeable" class="chart_container ui-resizable">
  		<div id="placeholder" class="chart resizeable" style="height:400px;width:900px;"></div>
	</div>

	<form id="date_selection_form" class="form-inline stack_large">
		<div id="date_selection_header" class="stack_small">
			<h4 id="date_selection_title">Choose a date range</h4>
		</div>
		start: <input type='text' id='date_selection_start_date' class='date_selection date_time_picker'/>&nbsp
		end: <input type='text' id='date_selection_end_date' class='date_selection date_time_picker'/>&nbsp
		trim data above <input type='text' id='trim_above_selection' class='trim trim_above'/> ms&nbsp
		<button id='date_selection_button' name='date_selection_button' class="btn btn-success" onclick="submitChartParams(); return false;">Update</button>
		<button id='page_refresh_button' name='page_refresh_button' class="btn btn-success float_right" onclick="location.reload(); return false;">Refresh</button>
	</form>
{% endblock %}
